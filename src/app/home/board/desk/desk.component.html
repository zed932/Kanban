<div class="desk-container">
  <div class="desk-header">
    @if (isEditing) {
      <div class="edit-form">
        <input
          type="text"
          [(ngModel)]="editedName"
          (keyup.enter)="saveEdit()"
          class="desk-name-input"
        />
        <div class="edit-actions">
          <button type="button" (click)="saveEdit()" class="save-button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <button type="button" (click)="cancelEdit()" class="cancel-button">–û—Ç–º–µ–Ω–∞</button>
        </div>
      </div>
    } @else {
      <div class="desk-title">
        <h3>{{desk.name}}</h3>
        <div class="desk-actions">
          <button type="button" class="edit-desk" (click)="startEditing()">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
          <button type="button" class="delete-desk" (click)="deleteDesk()">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
        </div>
      </div>
    }
  </div>

  @if (isAddingTask) {
    <div class="add-task-form">
      <input
        type="text"
        [(ngModel)]="newTask.name"
        placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏"
        (keyup.enter)="addTask()"
        class="task-input"
      />
      <textarea
        [(ngModel)]="newTask.description"
        placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏"
        class="task-textarea"
      ></textarea>
      <div class="form-actions">
        <button type="button" (click)="addTask()" class="save-button">–î–æ–±–∞–≤–∏—Ç—å</button>
        <button type="button" (click)="cancelAddingTask()" class="cancel-button">–û—Ç–º–µ–Ω–∞</button>
      </div>
    </div>
  } @else {
    <button type="button" class="add-task-button" (click)="startAddingTask()">
      + –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
    </button>
  }

  <div class="tasks-container">
    @for (task of desk.tasksList; track task.id) {
      <task
        [task]="task"
        [deskId]="desk.id"
        (taskUpdated)="onTaskUpdated($event)"
        (taskDeleted)="onTaskDeleted($event)"
      ></task>
    } @empty {
      <div class="empty-tasks">
        <p>–ù–µ—Ç –∑–∞–¥–∞—á. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é!</p>
      </div>
    }
  </div>
</div>
