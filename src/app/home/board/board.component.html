<div class="board-container">
  <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä -->
  <app-progress-bar
    [totalTasks]="taskStats.totalTasks"
    [completedTasks]="taskStats.completedTasks"
    [deskStats]="taskStats.byDesk"
  ></app-progress-bar>

  <div class="header">
    <div class="header-content">
      <h2>–ú–æ–∏ –¥–æ—Å–∫–∏</h2>
      <div class="header-stats">
        <span class="stat-item">
          <span class="stat-label">–í—Å–µ–≥–æ –¥–æ—Å–æ–∫:</span>
          <span class="stat-value">{{ desksList.length }}</span>
        </span>
        <span class="stat-item">
          <span class="stat-label">–ó–∞–¥–∞—á–∏:</span>
          <span class="stat-value">{{ taskStats.completedTasks }}/{{ taskStats.totalTasks }}</span>
        </span>
      </div>
    </div>
    <button type="button" class="create-button" (click)="startCreatingDesk()" title="–î–æ–±–∞–≤–∏—Ç—å –¥–æ—Å–∫—É">
      + –ù–æ–≤–∞—è –¥–æ—Å–∫–∞
    </button>
  </div>

  @if (isCreatingDesk) {
    <div class="create-desk-form">
      <input
        type="text"
        [(ngModel)]="newDeskName"
        placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ—Å–∫–∏"
        (keyup.enter)="createDesk()"
        class="desk-input"
      />
      <div class="form-actions">
        <button type="button" (click)="createDesk()" class="save-button">–°–æ–∑–¥–∞—Ç—å</button>
        <button type="button" (click)="cancelCreatingDesk()" class="cancel-button">–û—Ç–º–µ–Ω–∞</button>
      </div>
    </div>
  }

  <div class="desks-container">
    @if (desksList.length === 0) {
      <div class="empty-state">
        <div class="empty-state-icon">üìã</div>
        <h3>–ù–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –¥–æ—Å–æ–∫</h3>
        <p>–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é –¥–æ—Å–∫—É, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É!</p>
        <button type="button" class="create-first-desk" (click)="startCreatingDesk()">
          –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –¥–æ—Å–∫—É
        </button>
      </div>
    } @else {
      @for (desk of desksList; track desk.id) {
        <desk
          [desk]="desk"
          (deskDeleted)="loadDesks()"
          (deskUpdated)="loadDesks()"
        ></desk>
      }
    }
  </div>
</div>
